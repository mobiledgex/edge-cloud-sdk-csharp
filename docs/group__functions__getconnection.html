<!-- HTML header for doxygen 1.8.18-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.18"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>C# SDK: GetConnection Functions</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="customdoxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
â€‹
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 46px;">
  <td id="projectalign" style="padding-left: 0.5em; vertical-align: middle;">
   <div id="projectname"><a href="https://developers.mobiledgex.com"><svg xmlns="http://www.w3.org/2000/svg" width="185" height="35.93" viewBox="-15 -7 210 30.93"><defs><style>.cls-1{fill:#121620;}.cls-2{fill:#93e019;}</style></defs><title>Asset 163logo</title><g id="Layer_2" data-name="Layer 2"><g id="design"><path class="cls-1" d="M51,12.93a7.31,7.31,0,1,1-14.61,0,7.31,7.31,0,1,1,14.61,0Zm-3.39,0c0-2.91-1.85-4.4-3.93-4.4s-3.93,1.49-3.93,4.4,1.88,4.45,3.93,4.45S47.6,15.86,47.6,12.93ZM53,20V.05h3.31V7.69A5.09,5.09,0,0,1,60.7,5.58c4.22,0,6.5,3.21,6.5,7.35s-2.51,7.49-6.62,7.49a4.87,4.87,0,0,1-4.34-2.26l-1.88,1.89ZM60,8.56c-2.14,0-3.79,1.59-3.79,4.39s1.65,4.46,3.79,4.46,3.79-1.68,3.79-4.46S62.26,8.56,60,8.56Zm9.5-2.64V20.05h3.33V5.92Zm6,14.13V.05h3.36v20ZM107.56,0V7.61c-.43-.9-1.68-2-4.14-2-4,0-6.71,3.33-6.71,7.38,0,4.25,2.7,7.46,6.74,7.46a4.7,4.7,0,0,0,4.17-2.2h0L109.44,20h1.39V17.47h0V0Zm-3.7,17.44c-2.29,0-3.79-1.79-3.79-4.48s1.62-4.4,3.82-4.4,3.7,1.68,3.7,4.37S106.06,17.44,103.86,17.44ZM13.5.05h4.39L24,11.12,30,.05h4.39v20H30.89V5.74L24.65,17.28H23.23L17,5.74V20.05H13.5Zm59.33,0H69.54v3.3h3.29Zm52.29,5.87-1.64,1.64c-.43-.9-1.68-2-4.13-2a6.44,6.44,0,0,0-3.26.86,6.76,6.76,0,0,0-3.43,6c0,.18,0,.36,0,.55,0,4.25,2.72,7.46,6.77,7.46a4.78,4.78,0,0,0,3.83-1.75v.16c0,2.84-1.31,4.2-3.94,4.22h0a6,6,0,0,1-3.92-1.36c-.25-.2-.33-.3-.39-.35l-2.09,2.09c.14.15.22.23.37.37a8.61,8.61,0,0,0,6.08,2.17h0c5.29,0,7.23-3.5,7.23-7.26V5.92ZM119.78,17.4c-2.28,0-3.79-1.79-3.79-4.48,0-2.35,1.24-3.95,3-4.32a6.07,6.07,0,0,1,.71,0,4.08,4.08,0,0,1,2.15.61,4.45,4.45,0,0,1,1.52,3.73C123.38,15.58,122,17.4,119.78,17.4Zm-29.29-.33a5.1,5.1,0,0,1-2,.42,3.86,3.86,0,0,1-2.58-.88,4.21,4.21,0,0,1-1.38-2.44H94.72a8.66,8.66,0,0,0,.1-1.06,8.11,8.11,0,0,0-1.67-5.47,6.36,6.36,0,0,0-5.06-2.1,7,7,0,0,0-3.65.94,6.43,6.43,0,0,0-2.51,2.63A8.17,8.17,0,0,0,81,13a8.14,8.14,0,0,0,.88,3.86,6.39,6.39,0,0,0,2.5,2.6,7.39,7.39,0,0,0,3.75.92,8,8,0,0,0,3.3-.65,7.46,7.46,0,0,0,2.59-1.86l-1.93-1.93A5,5,0,0,1,90.49,17.07ZM85.64,9.23a3.47,3.47,0,0,1,2.48-.94,3.28,3.28,0,0,1,2.47,1,3.6,3.6,0,0,1,1,2.54H84.46A3.83,3.83,0,0,1,85.64,9.23Zm52.2,7.84a5.1,5.1,0,0,1-2,.42,3.86,3.86,0,0,1-2.58-.88,4.21,4.21,0,0,1-1.38-2.44h10.23a8.66,8.66,0,0,0,.1-1.06,8.06,8.06,0,0,0-1.68-5.47,6.32,6.32,0,0,0-5.05-2.1,7.07,7.07,0,0,0-3.66.94,6.47,6.47,0,0,0-2.5,2.63,8.17,8.17,0,0,0-.89,3.86,8.14,8.14,0,0,0,.88,3.86,6.39,6.39,0,0,0,2.5,2.6,7.39,7.39,0,0,0,3.75.92,8.07,8.07,0,0,0,3.3-.65,7.56,7.56,0,0,0,2.59-1.86l-1.93-1.93A5,5,0,0,1,137.84,17.07ZM133,9.23a3.44,3.44,0,0,1,2.47-.94,3.27,3.27,0,0,1,2.47,1,3.56,3.56,0,0,1,1,2.54h-7.09A3.79,3.79,0,0,1,133,9.23Z"/><path class="cls-2" d="M164.46,17.69v2.37h-2.37l-6-6,2.37-2.37ZM11.21,2.4V.05H8.81L0,8.87v2.37l8.81,8.81h2.4V17.7L3.56,10.05ZM174.4,10.05l-7.65,7.65v2.35h2.39L178,11.24V8.86L169.15.05h-2.4V2.4ZM146.82.05h-2.4V2.4l6,6,2.37-2.37ZM164.46,2.4V.05h-2.39L144.42,17.7v2.35h2.4Z"/><path class="cls-2" d="M178.12.72h-1.23V0h3.23v.7h-1.23V4h-.77ZM181,0h.81L183,1.92,184.21,0H185V4h-.74V1.18L183,3.08H183l-1.23-1.9V4H181Z"/></g></g></svg></a> C# SDK
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.18 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="modules.html"><span>Modules</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('group__functions__getconnection.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">GetConnection Functions<div class="ingroups"><a class="el" href="group__functiongroups.html">Function Groups</a></div></div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ga0dcb99ad336a8228fad38c02ffb5e81c"><td class="memItemLeft" align="right" valign="top">async Task&lt; Socket &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__functions__getconnection.html#ga0dcb99ad336a8228fad38c02ffb5e81c">DistributedMatchEngine.MatchingEngine.GetTCPConnection</a> (<a class="el" href="class_distributed_match_engine_1_1_find_cloudlet_reply.html">FindCloudletReply</a> reply, <a class="el" href="class_distributed_match_engine_1_1_app_port.html">AppPort</a> appPort, int desiredPort=0, int timeoutMs=<a class="el" href="class_distributed_match_engine_1_1_matching_engine.html#aa11041b5de841e190acf078493d39d76">DEFAULT_GETCONNECTION_TIMEOUT_MS</a>)</td></tr>
<tr class="separator:ga0dcb99ad336a8228fad38c02ffb5e81c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaae183d739bf0e5c8a340fe6ae8e79811"><td class="memItemLeft" align="right" valign="top">async Task&lt; SslStream &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__functions__getconnection.html#gaae183d739bf0e5c8a340fe6ae8e79811">DistributedMatchEngine.MatchingEngine.GetTCPTLSConnection</a> (<a class="el" href="class_distributed_match_engine_1_1_find_cloudlet_reply.html">FindCloudletReply</a> reply, <a class="el" href="class_distributed_match_engine_1_1_app_port.html">AppPort</a> appPort, int desiredPort=0, int timeoutMs=<a class="el" href="class_distributed_match_engine_1_1_matching_engine.html#aa11041b5de841e190acf078493d39d76">DEFAULT_GETCONNECTION_TIMEOUT_MS</a>, bool allowSelfSignedCerts=false)</td></tr>
<tr class="separator:gaae183d739bf0e5c8a340fe6ae8e79811"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga54cc49487109c53f1f3a7318ee9a9a56"><td class="memItemLeft" align="right" valign="top">async Task&lt; Socket &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__functions__getconnection.html#ga54cc49487109c53f1f3a7318ee9a9a56">DistributedMatchEngine.MatchingEngine.GetUDPConnection</a> (<a class="el" href="class_distributed_match_engine_1_1_find_cloudlet_reply.html">FindCloudletReply</a> reply, <a class="el" href="class_distributed_match_engine_1_1_app_port.html">AppPort</a> appPort, int desiredPort=0, int timeoutMs=<a class="el" href="class_distributed_match_engine_1_1_matching_engine.html#aa11041b5de841e190acf078493d39d76">DEFAULT_GETCONNECTION_TIMEOUT_MS</a>)</td></tr>
<tr class="separator:ga54cc49487109c53f1f3a7318ee9a9a56"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga82aa14e4ba2826595f45f812bd7d3360"><td class="memItemLeft" align="right" valign="top">async Task&lt; HttpClient &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__functions__getconnection.html#ga82aa14e4ba2826595f45f812bd7d3360">DistributedMatchEngine.MatchingEngine.GetHTTPClient</a> (<a class="el" href="class_distributed_match_engine_1_1_find_cloudlet_reply.html">FindCloudletReply</a> reply, <a class="el" href="class_distributed_match_engine_1_1_app_port.html">AppPort</a> appPort, int desiredPort=0, int timeoutMs=<a class="el" href="class_distributed_match_engine_1_1_matching_engine.html#aa11041b5de841e190acf078493d39d76">DEFAULT_GETCONNECTION_TIMEOUT_MS</a>, string path=&quot;&quot;)</td></tr>
<tr class="separator:ga82aa14e4ba2826595f45f812bd7d3360"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gac03219f5677caaa8bc5cf32c12d3f139"><td class="memItemLeft" align="right" valign="top">async Task&lt; HttpClient &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__functions__getconnection.html#gac03219f5677caaa8bc5cf32c12d3f139">DistributedMatchEngine.MatchingEngine.GetHTTPSClient</a> (<a class="el" href="class_distributed_match_engine_1_1_find_cloudlet_reply.html">FindCloudletReply</a> reply, <a class="el" href="class_distributed_match_engine_1_1_app_port.html">AppPort</a> appPort, int desiredPort=0, int timeoutMs=<a class="el" href="class_distributed_match_engine_1_1_matching_engine.html#aa11041b5de841e190acf078493d39d76">DEFAULT_GETCONNECTION_TIMEOUT_MS</a>, string path=&quot;&quot;)</td></tr>
<tr class="separator:gac03219f5677caaa8bc5cf32c12d3f139"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga67cc33f6d042e23067a94491f6a33197"><td class="memItemLeft" align="right" valign="top">async Task&lt; ClientWebSocket &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__functions__getconnection.html#ga67cc33f6d042e23067a94491f6a33197">DistributedMatchEngine.MatchingEngine.GetWebsocketConnection</a> (<a class="el" href="class_distributed_match_engine_1_1_find_cloudlet_reply.html">FindCloudletReply</a> reply, <a class="el" href="class_distributed_match_engine_1_1_app_port.html">AppPort</a> appPort, int desiredPort=0, int timeoutMs=<a class="el" href="class_distributed_match_engine_1_1_matching_engine.html#aa11041b5de841e190acf078493d39d76">DEFAULT_GETCONNECTION_TIMEOUT_MS</a>, string path=&quot;&quot;)</td></tr>
<tr class="separator:ga67cc33f6d042e23067a94491f6a33197"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga9e9050f07966ab43447e3a9e05fccc8a"><td class="memItemLeft" align="right" valign="top">async Task&lt; ClientWebSocket &gt;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="group__functions__getconnection.html#ga9e9050f07966ab43447e3a9e05fccc8a">DistributedMatchEngine.MatchingEngine.GetSecureWebsocketConnection</a> (<a class="el" href="class_distributed_match_engine_1_1_find_cloudlet_reply.html">FindCloudletReply</a> reply, <a class="el" href="class_distributed_match_engine_1_1_app_port.html">AppPort</a> appPort, int desiredPort=0, int timeoutMs=<a class="el" href="class_distributed_match_engine_1_1_matching_engine.html#aa11041b5de841e190acf078493d39d76">DEFAULT_GETCONNECTION_TIMEOUT_MS</a>, string path=&quot;&quot;)</td></tr>
<tr class="separator:ga9e9050f07966ab43447e3a9e05fccc8a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<h1><a class="anchor" id="getconnectionworkflow"></a>
GetConnection Workflow Example</h1>
<div class="fragment"><div class="line">      var loc = await Util.GetLocationFromDevice();</div>
<div class="line">      FindCloudletReply reply = <span class="keyword">null</span>;</div>
<div class="line"> </div>
<div class="line">      <span class="keywordflow">try</span></div>
<div class="line">      {</div>
<div class="line">        reply = await me.RegisterAndFindCloudlet(dmeHost, MatchingEngine.defaultDmeRestPort,</div>
<div class="line">          orgName: orgName,</div>
<div class="line">          appName: appName,</div>
<div class="line">          appVersion: appVers,</div>
<div class="line">          loc: loc);</div>
<div class="line">      }</div>
<div class="line">      <span class="keywordflow">catch</span> (DmeDnsException dde)</div>
<div class="line">      {</div>
<div class="line">        Console.WriteLine(<span class="stringliteral">&quot;Workflow DmeDnsException is &quot;</span> + dde);</div>
<div class="line">      }</div>
<div class="line">      <span class="keywordflow">catch</span> (NotImplementedException nie)</div>
<div class="line">      {</div>
<div class="line">        Console.WriteLine(<span class="stringliteral">&quot;NotImplementedException is &quot;</span> + nie);</div>
<div class="line">      }</div>
<div class="line">      <span class="keywordflow">catch</span> (RegisterClientException rce)</div>
<div class="line">      {</div>
<div class="line">        Console.WriteLine(<span class="stringliteral">&quot;Workflow RegisterClient is &quot;</span> + rce);</div>
<div class="line">        <span class="keywordflow">return</span>;</div>
<div class="line">      }</div>
<div class="line">      Assert.ByVal(reply, Is.Not.Null);</div>
<div class="line"> </div>
<div class="line">      Dictionary&lt;int, AppPort&gt; appPortsDict = me.GetTCPAppPorts(reply);</div>
<div class="line">      Assert.True(reply.status.Equals(FindCloudletReply.FindStatus.FIND_FOUND));</div>
<div class="line"> </div>
<div class="line">      <span class="keywordtype">int</span> public_port = reply.ports[0].public_port; <span class="comment">// We happen to know it&#39;s the first one.</span></div>
<div class="line">      AppPort appPort = appPortsDict[public_port];</div>
<div class="line"> </div>
<div class="line">      Assert.ByVal(appPort, Is.Not.Null);</div>
<div class="line"> </div>
<div class="line">      <span class="keywordflow">try</span></div>
<div class="line">      {</div>
<div class="line">        Socket tcpConnection = await me.GetTCPConnection(reply, appPort, public_port, 5000);</div>
<div class="line">        Assert.ByVal(tcpConnection, Is.Not.Null);</div>
<div class="line">        tcpConnection.Close();</div>
<div class="line">      }</div>
<div class="line">      <span class="keywordflow">catch</span> (GetConnectionException e)</div>
<div class="line">      {</div>
<div class="line">        Console.WriteLine(<span class="stringliteral">&quot;Workflow GetConnectionException is &quot;</span> + e.Message);</div>
<div class="line">        Assert.Fail(<span class="stringliteral">&quot;Workflow GetConnectionException is &quot;</span> + e.Message);</div>
<div class="line">      }</div>
<div class="line">      <span class="keywordflow">catch</span> (Exception e)</div>
<div class="line">      {</div>
<div class="line">        Assert.Fail(<span class="stringliteral">&quot;workflow test exception &quot;</span> + e.Message);</div>
<div class="line">      }</div>
</div><!-- fragment --><h2 class="groupheader">Function Documentation</h2>
<a id="ga82aa14e4ba2826595f45f812bd7d3360"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga82aa14e4ba2826595f45f812bd7d3360">&#9670;&nbsp;</a></span>GetHTTPClient()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">async Task&lt;HttpClient&gt; DistributedMatchEngine.MatchingEngine.GetHTTPClient </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_distributed_match_engine_1_1_find_cloudlet_reply.html">FindCloudletReply</a>&#160;</td>
          <td class="paramname"><em>reply</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_distributed_match_engine_1_1_app_port.html">AppPort</a>&#160;</td>
          <td class="paramname"><em>appPort</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>desiredPort</em> = <code>0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>timeoutMs</em> = <code><a class="el" href="class_distributed_match_engine_1_1_matching_engine.html#aa11041b5de841e190acf078493d39d76">DEFAULT_GETCONNECTION_TIMEOUT_MS</a></code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>path</em> = <code>&quot;&quot;</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns an HTTP Client configured to send requests to application backend.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">reply</td><td>(<a class="el" href="class_distributed_match_engine_1_1_find_cloudlet_reply.html">FindCloudletReply</a>) </td></tr>
    <tr><td class="paramname">appPort</td><td>(<a class="el" href="class_distributed_match_engine_1_1_app_port.html">AppPort</a>) </td></tr>
    <tr><td class="paramname">desiredPort</td><td>(int): Optional </td></tr>
    <tr><td class="paramname">timeout</td><td>(int): Optional </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Task&lt;HttpClient&gt; </dd></dl>
<h1><a class="anchor" id="gethttpexample"></a>
Example</h1>
<div class="fragment"><div class="line">      <span class="keywordflow">try</span></div>
<div class="line">      {</div>
<div class="line">        HttpClient httpClient = await me.GetHTTPClient(uri);</div>
<div class="line">        Assert.ByVal(httpClient, Is.Not.Null);</div>
<div class="line"> </div>
<div class="line">        StringContent content = <span class="keyword">new</span> StringContent(message);</div>
<div class="line">        HttpResponseMessage response = await httpClient.PostAsync(httpClient.BaseAddress, content);</div>
<div class="line"> </div>
<div class="line">        response.EnsureSuccessStatusCode();</div>
<div class="line">        <span class="keywordtype">string</span> responseBody = await response.Content.ReadAsStringAsync();</div>
<div class="line">        Assert.ByVal(responseBody, Is.Not.Null);</div>
<div class="line">        Console.WriteLine(<span class="stringliteral">&quot;http response body is &quot;</span> + responseBody);</div>
<div class="line">        Assert.True(responseBody.Contains(<span class="stringliteral">&quot;HTTP Connection Test&quot;</span>));</div>
<div class="line">      }</div>
<div class="line">      <span class="keywordflow">catch</span> (HttpRequestException e)</div>
<div class="line">      {</div>
<div class="line">        Assert.Fail(<span class="stringliteral">&quot;HttpRequestException is &quot;</span> + e.Message);</div>
<div class="line">      }</div>
</div><!-- fragment -->
</div>
</div>
<a id="gac03219f5677caaa8bc5cf32c12d3f139"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gac03219f5677caaa8bc5cf32c12d3f139">&#9670;&nbsp;</a></span>GetHTTPSClient()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">async Task&lt;HttpClient&gt; DistributedMatchEngine.MatchingEngine.GetHTTPSClient </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_distributed_match_engine_1_1_find_cloudlet_reply.html">FindCloudletReply</a>&#160;</td>
          <td class="paramname"><em>reply</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_distributed_match_engine_1_1_app_port.html">AppPort</a>&#160;</td>
          <td class="paramname"><em>appPort</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>desiredPort</em> = <code>0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>timeoutMs</em> = <code><a class="el" href="class_distributed_match_engine_1_1_matching_engine.html#aa11041b5de841e190acf078493d39d76">DEFAULT_GETCONNECTION_TIMEOUT_MS</a></code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>path</em> = <code>&quot;&quot;</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns an HTTPS Client configured to send requests to application backend.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">reply</td><td>(<a class="el" href="class_distributed_match_engine_1_1_find_cloudlet_reply.html">FindCloudletReply</a>) </td></tr>
    <tr><td class="paramname">appPort</td><td>(<a class="el" href="class_distributed_match_engine_1_1_app_port.html">AppPort</a>) </td></tr>
    <tr><td class="paramname">desiredPort</td><td>(int): Optional </td></tr>
    <tr><td class="paramname">timeout</td><td>(int): Optional </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Task&lt;HttpClient&gt; </dd></dl>

</div>
</div>
<a id="ga9e9050f07966ab43447e3a9e05fccc8a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga9e9050f07966ab43447e3a9e05fccc8a">&#9670;&nbsp;</a></span>GetSecureWebsocketConnection()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">async Task&lt;ClientWebSocket&gt; DistributedMatchEngine.MatchingEngine.GetSecureWebsocketConnection </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_distributed_match_engine_1_1_find_cloudlet_reply.html">FindCloudletReply</a>&#160;</td>
          <td class="paramname"><em>reply</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_distributed_match_engine_1_1_app_port.html">AppPort</a>&#160;</td>
          <td class="paramname"><em>appPort</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>desiredPort</em> = <code>0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>timeoutMs</em> = <code><a class="el" href="class_distributed_match_engine_1_1_matching_engine.html#aa11041b5de841e190acf078493d39d76">DEFAULT_GETCONNECTION_TIMEOUT_MS</a></code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>path</em> = <code>&quot;&quot;</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns a Secure Websocket Client configured to send requests to application backend.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">reply</td><td>(<a class="el" href="class_distributed_match_engine_1_1_find_cloudlet_reply.html">FindCloudletReply</a>) </td></tr>
    <tr><td class="paramname">appPort</td><td>(<a class="el" href="class_distributed_match_engine_1_1_app_port.html">AppPort</a>) </td></tr>
    <tr><td class="paramname">desiredPort</td><td>(int): Optional </td></tr>
    <tr><td class="paramname">timeout</td><td>(int): Optional </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Task&lt;ClientWebSocket&gt; </dd></dl>

</div>
</div>
<a id="ga0dcb99ad336a8228fad38c02ffb5e81c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga0dcb99ad336a8228fad38c02ffb5e81c">&#9670;&nbsp;</a></span>GetTCPConnection()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">async Task&lt;Socket&gt; DistributedMatchEngine.MatchingEngine.GetTCPConnection </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_distributed_match_engine_1_1_find_cloudlet_reply.html">FindCloudletReply</a>&#160;</td>
          <td class="paramname"><em>reply</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_distributed_match_engine_1_1_app_port.html">AppPort</a>&#160;</td>
          <td class="paramname"><em>appPort</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>desiredPort</em> = <code>0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>timeoutMs</em> = <code><a class="el" href="class_distributed_match_engine_1_1_matching_engine.html#aa11041b5de841e190acf078493d39d76">DEFAULT_GETCONNECTION_TIMEOUT_MS</a></code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get a TCP socket bound to the local cellular interface and connected to the application's backend server. If no exceptions thrown and object is not null, the socket is ready to send application data to backend.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">reply</td><td>(<a class="el" href="class_distributed_match_engine_1_1_find_cloudlet_reply.html">FindCloudletReply</a>) </td></tr>
    <tr><td class="paramname">appPort</td><td>(<a class="el" href="class_distributed_match_engine_1_1_app_port.html">AppPort</a>) </td></tr>
    <tr><td class="paramname">desiredPort</td><td>(int): Optional </td></tr>
    <tr><td class="paramname">timeout</td><td>(int): Optional </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Task&lt;Socket&gt; </dd></dl>
<h1><a class="anchor" id="gettcpconnexample"></a>
Example</h1>
<div class="fragment"><div class="line">      <span class="keywordtype">string</span> receiveMessage = <span class="stringliteral">&quot;&quot;</span>;</div>
<div class="line">      <span class="keywordflow">try</span></div>
<div class="line">      {</div>
<div class="line">        Socket tcpConnection = await me.GetTCPConnection(connectionTestFqdn, 3001, 5000);</div>
<div class="line">        Assert.ByVal(tcpConnection, Is.Not.Null);</div>
<div class="line"> </div>
<div class="line">        tcpConnection.Send(bytesMessage);</div>
<div class="line"> </div>
<div class="line">        <span class="keywordtype">byte</span>[] buffer = <span class="keyword">new</span> <span class="keywordtype">byte</span>[message.Length * 2]; <span class="comment">// C# chars are unicode-16 bits</span></div>
<div class="line">        <span class="keywordtype">int</span> numRead = tcpConnection.Receive(buffer);</div>
<div class="line">        <span class="keywordtype">byte</span>[] readBuffer = <span class="keyword">new</span> <span class="keywordtype">byte</span>[numRead];</div>
<div class="line">        Array.Copy(buffer, readBuffer, numRead);</div>
<div class="line">        receiveMessage = Encoding.ASCII.GetString(readBuffer);</div>
<div class="line"> </div>
<div class="line">        Console.WriteLine(<span class="stringliteral">&quot;Echoed tcp string: &quot;</span> + receiveMessage);</div>
<div class="line">        tcpConnection.Close();</div>
<div class="line">      }</div>
<div class="line">      <span class="keywordflow">catch</span> (GetConnectionException e)</div>
<div class="line">      {</div>
<div class="line">        Console.WriteLine(<span class="stringliteral">&quot;TCP GetConnectionException is &quot;</span> + e.Message);</div>
<div class="line">      }</div>
<div class="line">      <span class="keywordflow">catch</span> (Exception e)</div>
<div class="line">      {</div>
<div class="line">        Console.WriteLine(<span class="stringliteral">&quot;TCP socket exception is &quot;</span> + e);</div>
<div class="line">      }</div>
</div><!-- fragment -->
</div>
</div>
<a id="gaae183d739bf0e5c8a340fe6ae8e79811"></a>
<h2 class="memtitle"><span class="permalink"><a href="#gaae183d739bf0e5c8a340fe6ae8e79811">&#9670;&nbsp;</a></span>GetTCPTLSConnection()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">async Task&lt;SslStream&gt; DistributedMatchEngine.MatchingEngine.GetTCPTLSConnection </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_distributed_match_engine_1_1_find_cloudlet_reply.html">FindCloudletReply</a>&#160;</td>
          <td class="paramname"><em>reply</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_distributed_match_engine_1_1_app_port.html">AppPort</a>&#160;</td>
          <td class="paramname"><em>appPort</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>desiredPort</em> = <code>0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>timeoutMs</em> = <code><a class="el" href="class_distributed_match_engine_1_1_matching_engine.html#aa11041b5de841e190acf078493d39d76">DEFAULT_GETCONNECTION_TIMEOUT_MS</a></code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>allowSelfSignedCerts</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns a TCP socket with TLS running over it for secure data communication. Bound to local cellular interface and if no exceptions thrown and object is not null, the socket is ready to send application data to backend</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">reply</td><td>(<a class="el" href="class_distributed_match_engine_1_1_find_cloudlet_reply.html">FindCloudletReply</a>) </td></tr>
    <tr><td class="paramname">appPort</td><td>(<a class="el" href="class_distributed_match_engine_1_1_app_port.html">AppPort</a>) </td></tr>
    <tr><td class="paramname">desiredPort</td><td>(int): Optional </td></tr>
    <tr><td class="paramname">timeout</td><td>(int): Optional </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Task&lt;SslStream&gt; </dd></dl>
<h1><a class="anchor" id="gettcptlsconnexample"></a>
Example</h1>
<div class="fragment"><div class="line">      <span class="keywordflow">try</span></div>
<div class="line">      {</div>
<div class="line">        <span class="keywordtype">string</span> rawpost = <span class="stringliteral">&quot;ping&quot;</span>;</div>
<div class="line">        <span class="keywordtype">byte</span>[] bytes = Encoding.UTF8.GetBytes(rawpost);</div>
<div class="line"> </div>
<div class="line">        <a class="code" href="class_distributed_match_engine_1_1_matching_engine.html#ac16acdd9772a7aa9d023b3d3a9e27629">MatchingEngine</a>.ServerRequiresClientCertificateAuthentication(<span class="keyword">true</span>);</div>
<div class="line">        <a class="code" href="class_distributed_match_engine_1_1_matching_engine.html#ac16acdd9772a7aa9d023b3d3a9e27629">MatchingEngine</a>.AddClientCert(<span class="stringliteral">&quot;path&quot;</span>);</div>
<div class="line"> </div>
<div class="line">        SslStream stream = await me.GetTCPTLSConnection(<span class="stringliteral">&quot;porttestapp-tcp.automationfairviewcloudlet.gddt.mobiledgex.net&quot;</span>, 2015, 5000, <span class="keyword">true</span>);</div>
<div class="line">        Assert.ByVal(stream, Is.Not.Null);</div>
<div class="line">        Assert.ByVal(stream.CipherAlgorithm, Is.Not.Null);</div>
<div class="line"> </div>
<div class="line">        stream.Write(Encoding.UTF8.GetBytes(rawpost));</div>
<div class="line"> </div>
<div class="line">        await Task.Delay(500);</div>
<div class="line">        <span class="keywordtype">byte</span>[] readBuffer = <span class="keyword">new</span> <span class="keywordtype">byte</span>[rawpost.Length];</div>
<div class="line"> </div>
<div class="line">        Assert.True(stream.CanRead);</div>
<div class="line">        stream.Read(readBuffer);</div>
<div class="line"> </div>
<div class="line">        <span class="keywordtype">string</span> response = Encoding.UTF8.GetString(readBuffer);</div>
<div class="line">        Console.WriteLine(<span class="stringliteral">&quot;Response: &quot;</span> + response);</div>
<div class="line">        Assert.True(response.Contains(<span class="stringliteral">&quot;pong&quot;</span>));</div>
<div class="line">        stream.Close();</div>
<div class="line">      }</div>
<div class="line">      <span class="keywordflow">catch</span> (AuthenticationException e)</div>
<div class="line">      {</div>
<div class="line">        Assert.Fail(<span class="stringliteral">&quot;Authentication Exception is &quot;</span> + e.Message);</div>
<div class="line">      }</div>
<div class="line">      <span class="keywordflow">catch</span> (GetConnectionException e)</div>
<div class="line">      {</div>
<div class="line">        Assert.Fail(<span class="stringliteral">&quot;TCPTLS GetConnectionException is &quot;</span> + e.Message);</div>
<div class="line">      }</div>
<div class="line">      <span class="keywordflow">catch</span> (IOException ioe)</div>
<div class="line">      {</div>
<div class="line">        Assert.Fail(<span class="stringliteral">&quot;ioe exception is &quot;</span> + ioe.Message);</div>
<div class="line">        <span class="comment">// FIXME: The test server doesn&#39;t have HTTPs.</span></div>
<div class="line">        Assert.False(ioe.Message.Contains(<span class="stringliteral">&quot;The handshake failed due to an unexpected packet format.&quot;</span>));</div>
<div class="line">      }</div>
</div><!-- fragment -->
</div>
</div>
<a id="ga54cc49487109c53f1f3a7318ee9a9a56"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga54cc49487109c53f1f3a7318ee9a9a56">&#9670;&nbsp;</a></span>GetUDPConnection()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">async Task&lt;Socket&gt; DistributedMatchEngine.MatchingEngine.GetUDPConnection </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_distributed_match_engine_1_1_find_cloudlet_reply.html">FindCloudletReply</a>&#160;</td>
          <td class="paramname"><em>reply</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_distributed_match_engine_1_1_app_port.html">AppPort</a>&#160;</td>
          <td class="paramname"><em>appPort</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>desiredPort</em> = <code>0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>timeoutMs</em> = <code><a class="el" href="class_distributed_match_engine_1_1_matching_engine.html#aa11041b5de841e190acf078493d39d76">DEFAULT_GETCONNECTION_TIMEOUT_MS</a></code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get a UDP socket bound to the local cellular interface and connected to the application's backend server. If no exceptions thrown and object is not null, the socket is ready to send application data to backend.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">reply</td><td>(<a class="el" href="class_distributed_match_engine_1_1_find_cloudlet_reply.html">FindCloudletReply</a>) </td></tr>
    <tr><td class="paramname">appPort</td><td>(<a class="el" href="class_distributed_match_engine_1_1_app_port.html">AppPort</a>) </td></tr>
    <tr><td class="paramname">desiredPort</td><td>(int): Optional </td></tr>
    <tr><td class="paramname">timeout</td><td>(int): Optional </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Task&lt;Socket&gt; </dd></dl>

</div>
</div>
<a id="ga67cc33f6d042e23067a94491f6a33197"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga67cc33f6d042e23067a94491f6a33197">&#9670;&nbsp;</a></span>GetWebsocketConnection()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">async Task&lt;ClientWebSocket&gt; DistributedMatchEngine.MatchingEngine.GetWebsocketConnection </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="class_distributed_match_engine_1_1_find_cloudlet_reply.html">FindCloudletReply</a>&#160;</td>
          <td class="paramname"><em>reply</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="class_distributed_match_engine_1_1_app_port.html">AppPort</a>&#160;</td>
          <td class="paramname"><em>appPort</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>desiredPort</em> = <code>0</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>timeoutMs</em> = <code><a class="el" href="class_distributed_match_engine_1_1_matching_engine.html#aa11041b5de841e190acf078493d39d76">DEFAULT_GETCONNECTION_TIMEOUT_MS</a></code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">string&#160;</td>
          <td class="paramname"><em>path</em> = <code>&quot;&quot;</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns an Websocket Client configured to send requests to application backend.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">reply</td><td>(<a class="el" href="class_distributed_match_engine_1_1_find_cloudlet_reply.html">FindCloudletReply</a>) </td></tr>
    <tr><td class="paramname">appPort</td><td>(<a class="el" href="class_distributed_match_engine_1_1_app_port.html">AppPort</a>) </td></tr>
    <tr><td class="paramname">desiredPort</td><td>(int): Optional </td></tr>
    <tr><td class="paramname">timeout</td><td>(int): Optional </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Task&lt;ClientWebSocket&gt; </dd></dl>
<h1><a class="anchor" id="getwebsocketexample"></a>
Example</h1>
<div class="fragment"><div class="line">      ClientWebSocket socket = <span class="keyword">null</span>;</div>
<div class="line">      <span class="keywordtype">string</span> url = <span class="stringliteral">&quot;ws://&quot;</span> + aWebSocketServerFqdn + <span class="stringliteral">&quot;:&quot;</span> + 3000;</div>
<div class="line">      UriBuilder uriBuilder = <span class="keyword">new</span> UriBuilder(url);</div>
<div class="line">      Uri uri = uriBuilder.Uri;</div>
<div class="line"> </div>
<div class="line">      <span class="keywordflow">try</span></div>
<div class="line">      {</div>
<div class="line">        socket = await me.GetWebsocketConnection(uri, 5000);</div>
<div class="line">      }</div>
<div class="line">      <span class="keywordflow">catch</span> (Exception e)</div>
<div class="line">      {</div>
<div class="line">        Console.WriteLine(<span class="stringliteral">&quot;Websocket Initial GetConnectionException is &quot;</span> + e.Message);</div>
<div class="line">        Assert.ByVal(socket, Is.Not.Null);</div>
<div class="line">        Assert.True(socket.State == WebSocketState.Open);</div>
<div class="line">      }</div>
<div class="line"> </div>
<div class="line">      <span class="keywordflow">try</span></div>
<div class="line">      {</div>
<div class="line">        <span class="comment">// Send message</span></div>
<div class="line">        ArraySegment&lt;Byte&gt; sendBuffer = <span class="keyword">new</span> ArraySegment&lt;byte&gt;(bytesMessage);</div>
<div class="line">        CancellationTokenSource source = <span class="keyword">new</span> CancellationTokenSource();</div>
<div class="line">        CancellationToken token = source.Token;</div>
<div class="line">        await socket.SendAsync(sendBuffer, WebSocketMessageType.Text, <span class="keyword">true</span>, token);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Receive message</span></div>
<div class="line">        <span class="keywordtype">byte</span>[] bytesReceive = <span class="keyword">new</span> <span class="keywordtype">byte</span>[message.Length * 2];</div>
<div class="line">        ArraySegment&lt;Byte&gt; receiveBuffer = <span class="keyword">new</span> ArraySegment&lt;byte&gt;(bytesReceive);</div>
<div class="line">        WebSocketReceiveResult result = await socket.ReceiveAsync(receiveBuffer, token);</div>
<div class="line">        <span class="keywordtype">string</span> receiveMessage = Encoding.ASCII.GetString(receiveBuffer.Array, receiveBuffer.Offset, result.Count);</div>
<div class="line"> </div>
<div class="line">        Console.WriteLine(<span class="stringliteral">&quot;Echoed websocket result is &quot;</span> + receiveMessage);</div>
<div class="line">        Assert.True(socket.State == WebSocketState.Open);</div>
<div class="line">        await socket.CloseAsync(WebSocketCloseStatus.NormalClosure, <span class="stringliteral">&quot;end of test&quot;</span>, token);</div>
<div class="line">        await Task.Delay(100);</div>
<div class="line">        Assert.True(socket.State == WebSocketState.Closed || socket.State == WebSocketState.CloseSent);</div>
<div class="line">      }</div>
<div class="line">      <span class="keywordflow">catch</span> (GetConnectionException e)</div>
<div class="line">      {</div>
<div class="line">        Console.WriteLine(<span class="stringliteral">&quot;Websocket GetConnectionException is &quot;</span> + e.Message);</div>
<div class="line">        <span class="comment">// Since we don&#39;t necessarily know the message format, this should actually be slammed closed by the running server.</span></div>
<div class="line">        <span class="comment">//Assert.True(e.Message.Contains(&quot;Cannot get websocket connection&quot;));</span></div>
<div class="line">      }</div>
<div class="line">      <span class="keywordflow">catch</span> (OperationCanceledException e)</div>
<div class="line">      {</div>
<div class="line">        Console.WriteLine(<span class="stringliteral">&quot;Websocket OperationCanceledException is &quot;</span> + e.Message);</div>
<div class="line">      }</div>
<div class="line">      <span class="keywordflow">catch</span> (Exception e)</div>
<div class="line">      {</div>
<div class="line">        Console.WriteLine(<span class="stringliteral">&quot;Websocket Exception is &quot;</span> + e.Message);</div>
<div class="line">      }</div>
</div><!-- fragment -->
</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<div class="ttc" id="aclass_distributed_match_engine_1_1_matching_engine_html_ac16acdd9772a7aa9d023b3d3a9e27629"><div class="ttname"><a href="class_distributed_match_engine_1_1_matching_engine.html#ac16acdd9772a7aa9d023b3d3a9e27629">DistributedMatchEngine.MatchingEngine.MatchingEngine</a></div><div class="ttdeci">MatchingEngine(CarrierInfo carrierInfo=null, NetInterface netInterface=null, UniqueID uniqueID=null, DeviceInfo deviceInfo=null)</div><div class="ttdef"><b>Definition:</b> DistributedMatchEngine.cs:243</div></div>
<!-- HTML footer for doxygen 1.8.18-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.18 </li>
  </ul>
</div>
</body>
</html>
